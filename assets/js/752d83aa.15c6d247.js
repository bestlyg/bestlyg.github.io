"use strict";(self.webpackChunk_bestlyg_site=self.webpackChunk_bestlyg_site||[]).push([[14232],{19920:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>a,frontMatter:()=>p,metadata:()=>l,toc:()=>d});var r=i(86070),t=i(25710);const p={},s="123.\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII",l={id:"leetcode/101-200/\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII",title:"123.\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII",description:"\u94fe\u63a5\uff1a123.\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII",source:"@site/docs/leetcode/101-200/123.\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII.md",sourceDirName:"leetcode/101-200",slug:"/leetcode/101-200/\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII",permalink:"/docs/leetcode/101-200/\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:123,frontMatter:{},sidebar:"journal",previous:{title:"122.\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aII",permalink:"/docs/leetcode/101-200/\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aII"},next:{title:"124.\u4e8c\u53c9\u6811\u4e2d\u7684\u6700\u5927\u8def\u5f84\u548c",permalink:"/docs/leetcode/101-200/\u4e8c\u53c9\u6811\u4e2d\u7684\u6700\u5927\u8def\u5f84\u548c"}},c={},d=[{value:"\u9898\u89e3 1 - typescript",id:"\u9898\u89e3-1---typescript",level:2},{value:"\u9898\u89e3 2 - typescript",id:"\u9898\u89e3-2---typescript",level:2},{value:"\u9898\u89e3 3 - typescript",id:"\u9898\u89e3-3---typescript",level:2},{value:"\u9898\u89e3 4 - python",id:"\u9898\u89e3-4---python",level:2}];function o(n){const e={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"123\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aiii",children:"123.\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["\u94fe\u63a5\uff1a",(0,r.jsx)(e.a,{href:"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii",children:"123.\u4e70\u5356\u80a1\u7968\u7684\u6700\u4f73\u65f6\u673aIII"}),(0,r.jsx)(e.br,{}),"\n","\u96be\u5ea6\uff1a\u56f0\u96be",(0,r.jsx)(e.br,{}),"\n","\u6807\u7b7e\uff1a\u6570\u7ec4\u3001\u52a8\u6001\u89c4\u5212",(0,r.jsx)(e.br,{}),"\n","\u7b80\u4ecb\uff1a","\u7ed9\u5b9a\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b83\u7684\u7b2c i \u4e2a\u5143\u7d20\u662f\u4e00\u652f\u7ed9\u5b9a\u7684\u80a1\u7968\u5728\u7b2c i \u5929\u7684\u4ef7\u683c\u3002\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u6765\u8ba1\u7b97\u4f60\u6240\u80fd\u83b7\u53d6\u7684\u6700\u5927\u5229\u6da6\u3002\u4f60\u6700\u591a\u53ef\u4ee5\u5b8c\u6210 \u4e24\u7b14 \u4ea4\u6613\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u9898\u89e3-1---typescript",children:"\u9898\u89e3 1 - typescript"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7f16\u8f91\u65f6\u95f4\uff1a2021-01-09"}),"\n",(0,r.jsx)(e.li,{children:"\u6267\u884c\u7528\u65f6\uff1a1028ms"}),"\n",(0,r.jsx)(e.li,{children:"\u5185\u5b58\u6d88\u8017\uff1a85.4MB"}),"\n",(0,r.jsx)(e.li,{children:"\u7f16\u7a0b\u8bed\u8a00\uff1atypescript"}),"\n",(0,r.jsxs)(e.li,{children:["\u89e3\u6cd5\u4ecb\u7ecd\uff1a","\u52a8\u6001\u89c4\u5212\u8ba1\u7b97\u6bcf\u4e2a\u72b6\u6001\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"function maxProfit(prices: number[]): number {\n  const len = prices.length;\n  if (len < 2) return 0;\n  // 0 \u624b\u4e0a\u6ca1\uff0c1 \u624b\u4e0a\u6709\n  // 0 \u5b8c\u62100\u6b21\u4ea4\u6613 1 \u5b8c\u62101\u6b21\u4ea4\u6613 2 \u5b8c\u6210\u4e24\u6b21\u4ea4\u6613\n  const dp: number[][][] = new Array(len)\n    .fill(0)\n    .map(_ => new Array(2).fill(0).map(_ => new Array(3).fill(-Infinity)));\n  [dp[0][0][0], dp[0][1][0]] = [0, -prices[0]];\n  for (let i = 1; i < len; i++) {\n    dp[i][0][0] = dp[i - 1][0][0];\n    dp[i][0][1] = Math.max(prices[i] + dp[i - 1][1][0], dp[i - 1][0][1]);\n    dp[i][0][2] = i >= 3 ? Math.max(prices[i] + dp[i - 1][1][1], dp[i - 1][0][2]) : 0;\n    dp[i][1][0] = Math.max(dp[i - 1][1][0], -prices[i]);\n    dp[i][1][1] = Math.max(dp[i - 1][1][1], dp[i - 1][0][1] - prices[i]);\n    dp[i][1][2] = 0;\n  }\n  return Math.max(dp[len - 1][0][2], dp[len - 1][0][1]);\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u9898\u89e3-2---typescript",children:"\u9898\u89e3 2 - typescript"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7f16\u8f91\u65f6\u95f4\uff1a2021-01-09"}),"\n",(0,r.jsx)(e.li,{children:"\u6267\u884c\u7528\u65f6\uff1a984ms"}),"\n",(0,r.jsx)(e.li,{children:"\u5185\u5b58\u6d88\u8017\uff1a86.9MB"}),"\n",(0,r.jsx)(e.li,{children:"\u7f16\u7a0b\u8bed\u8a00\uff1atypescript"}),"\n",(0,r.jsxs)(e.li,{children:["\u89e3\u6cd5\u4ecb\u7ecd\uff1a","\u4f18\u5316\u9898\u89e3 1\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"function maxProfit(prices: number[]): number {\n  const len = prices.length;\n  if (len < 2) return 0;\n  // 0 \u624b\u4e0a\u6ca1\uff0c1 \u624b\u4e0a\u6709\n  // 0 \u5b8c\u62100\u6b21\u4ea4\u6613 1 \u5b8c\u62101\u6b21\u4ea4\u6613 2 \u5b8c\u6210\u4e24\u6b21\u4ea4\u6613\n  const dp: number[][][] = new Array(len)\n    .fill(0)\n    .map(_ => new Array(2).fill(0).map(_ => new Array(3).fill(-Infinity)));\n  [dp[0][0][0], dp[0][1][0]] = [0, -prices[0]];\n  for (let i = 1; i < len; i++) {\n    const prev = dp[i - 1];\n    const prev0 = prev[0];\n    const prev1 = prev[1];\n    const price = prices[i];\n    [dp[i][0][1], dp[i][0][2], dp[i][1][0], dp[i][1][1]] = [\n      Math.max(price + prev1[0], prev0[1]),\n      i >= 3 ? Math.max(price + prev1[1], prev0[2]) : 0,\n      Math.max(prev1[0], -price),\n      Math.max(prev1[1], prev0[1] - price),\n    ];\n  }\n  return Math.max(dp[len - 1][0][2], dp[len - 1][0][1]);\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u9898\u89e3-3---typescript",children:"\u9898\u89e3 3 - typescript"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7f16\u8f91\u65f6\u95f4\uff1a2021-01-09"}),"\n",(0,r.jsx)(e.li,{children:"\u6267\u884c\u7528\u65f6\uff1a1008ms"}),"\n",(0,r.jsx)(e.li,{children:"\u5185\u5b58\u6d88\u8017\uff1a82.7MB"}),"\n",(0,r.jsx)(e.li,{children:"\u7f16\u7a0b\u8bed\u8a00\uff1atypescript"}),"\n",(0,r.jsxs)(e.li,{children:["\u89e3\u6cd5\u4ecb\u7ecd\uff1a","\u4f18\u5316\u9898\u89e3 1\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"function maxProfit(prices: number[]): number {\n  const len = prices.length;\n  if (len < 2) return 0;\n  // 0 \u624b\u4e0a\u6ca1\uff0c1 \u624b\u4e0a\u6709\n  // 0 \u5b8c\u62100\u6b21\u4ea4\u6613 1 \u5b8c\u62101\u6b21\u4ea4\u6613 2 \u5b8c\u6210\u4e24\u6b21\u4ea4\u6613\n  const dp: number[][][] = new Array(len)\n    .fill(0)\n    .map(_ => new Array(2).fill(0).map(_ => new Array(3).fill(-Infinity)));\n  [dp[0][0][0], dp[0][1][0]] = [0, -prices[0]];\n  let [dp01, dp02, dp10, dp11] = [-Infinity, -Infinity, -prices[0], -Infinity];\n  for (let i = 1; i < len; i++) {\n    const price = prices[i];\n    [dp01, dp02, dp10, dp11] = [\n      Math.max(price + dp10, dp01),\n      i >= 3 ? Math.max(price + dp11, dp02) : 0,\n      Math.max(dp10, -price),\n      Math.max(dp11, dp01 - price),\n    ];\n  }\n  return Math.max(dp01, dp02);\n}\n// 6\nconsole.log(maxProfit([3, 3, 5, 0, 0, 3, 1, 4]));\n// 4\nconsole.log(maxProfit([1, 2, 3, 4, 5]));\n// 0\nconsole.log(maxProfit([2, 1, 4]));\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u9898\u89e3-4---python",children:"\u9898\u89e3 4 - python"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7f16\u8f91\u65f6\u95f4\uff1a2023-10-03"}),"\n",(0,r.jsx)(e.li,{children:"\u6267\u884c\u7528\u65f6\uff1a1924ms"}),"\n",(0,r.jsx)(e.li,{children:"\u5185\u5b58\u6d88\u8017\uff1a80.1MB"}),"\n",(0,r.jsx)(e.li,{children:"\u7f16\u7a0b\u8bed\u8a00\uff1apython"}),"\n",(0,r.jsxs)(e.li,{children:["\u89e3\u6cd5\u4ecb\u7ecd\uff1a","dp[i][j][k]\u8868\u793ai\u5929j\u7b14\u624b\u4e0a\u6709\u65e0\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"class Solution:\n    def maxProfit(self, prices: List[int]) -> int:\n        n = len(prices)\n        # [i][j][k] i\u5929j\u7b14\u624b\u4e0a\u6709\u65e0\n        dp = [[[-inf for _ in range(2)] for _ in range(3)] for _ in range(n)]\n        num0 = dp[0][0][0] = 0\n        num1 = dp[0][0][1] = -prices[0]\n        res = 0\n        num2 = num3 = -inf\n        for i in range(1, n):\n            dp[i][0][0] = dp[i - 1][0][0]\n            dp[i][0][1] = num0 - prices[i]\n            dp[i][1][0] = num1 + prices[i]\n            dp[i][1][1] = num2 - prices[i]\n            dp[i][2][0] = num3 + prices[i]\n            num0 = max(num0, dp[i][0][0])\n            num1 = max(num1, dp[i][0][1])\n            num2 = max(num2, dp[i][1][0])\n            num3 = max(num3, dp[i][1][1])\n            res = max(res, dp[i][1][0], dp[i][2][0])\n        return res\n\n"})})]})}function a(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},25710:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>l});var r=i(30758);const t={},p=r.createContext(t);function s(n){const e=r.useContext(p);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),r.createElement(p.Provider,{value:e},n.children)}}}]);
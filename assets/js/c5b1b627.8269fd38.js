"use strict";(self.webpackChunk_bestlyg_site=self.webpackChunk_bestlyg_site||[]).push([[30221],{58731:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>l,default:()=>s,frontMatter:()=>a,metadata:()=>d,toc:()=>o});var r=t(86070),i=t(25710);const a={},l="AVL \u6811(AVLTree)",d={id:"\u6570\u636e\u7ed3\u6784/\u6811/AVL\u6811",title:"AVL \u6811(AVLTree)",description:"\u6700\u65e9\u53d1\u660e\u7684\u81ea\u5e73\u8861\u4e8c\u53c9\u641c\u7d22\u6811\u4e4b\u4e00",source:"@site/docs/\u6570\u636e\u7ed3\u6784/\u6811/AVL\u6811.mdx",sourceDirName:"\u6570\u636e\u7ed3\u6784/\u6811",slug:"/\u6570\u636e\u7ed3\u6784/\u6811/AVL\u6811",permalink:"/docs/\u6570\u636e\u7ed3\u6784/\u6811/AVL\u6811",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"journal",previous:{title:"\u6811(Tree)",permalink:"/docs/\u6570\u636e\u7ed3\u6784/\u6811/"},next:{title:"Fenwick Tree",permalink:"/docs/\u6570\u636e\u7ed3\u6784/\u6811/FenwickTree"}},h={},o=[{value:"\u5e73\u8861\u56e0\u5b50(BlanceFactor)",id:"\u5e73\u8861\u56e0\u5b50blancefactor",level:2},{value:"\u7279\u70b9",id:"\u7279\u70b9",level:2},{value:"\u6838\u5fc3\u4ee3\u7801",id:"\u6838\u5fc3\u4ee3\u7801",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"avl-\u6811avltree",children:"AVL \u6811(AVLTree)"})}),"\n",(0,r.jsx)(n.p,{children:"\u6700\u65e9\u53d1\u660e\u7684\u81ea\u5e73\u8861\u4e8c\u53c9\u641c\u7d22\u6811\u4e4b\u4e00"}),"\n",(0,r.jsx)(n.h2,{id:"\u5e73\u8861\u56e0\u5b50blancefactor",children:"\u5e73\u8861\u56e0\u5b50(BlanceFactor)"}),"\n",(0,r.jsx)(n.p,{children:"\u67d0\u8282\u70b9\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee"}),"\n",(0,r.jsx)(n.h2,{id:"\u7279\u70b9",children:"\u7279\u70b9"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6bcf\u4e2a\u8282\u70b9\u7684\u5e73\u8861\u56e0\u5b50\u53ea\u53ef\u80fd\u662f-1\u30010\u30011(\u7edd\u5bf9\u503c\u5c0f\u4e8e\u7b49\u4e8e1\uff0c\u5982\u679c\u8d85\u8fc7 1\uff0c\u79f0\u4e4b\u4e3a\u5931\u8861)"}),"\n",(0,r.jsx)(n.li,{children:"\u6bcf\u4e2a\u7ed3\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u9ad8\u5ea6\u5dee\u4e0d\u8d85\u8fc7 1"}),"\n",(0,r.jsx)(n.li,{children:"\u641c\u7d22\u3001\u6dfb\u52a0\u3001\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(logN)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6838\u5fc3\u4ee3\u7801",children:"\u6838\u5fc3\u4ee3\u7801"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { BlanceBinarySearchTree } from './blanceBinarySearchTree';\nimport { BinaryTreeNode } from './binaryTree';\nexport class AVLTreeNode<T> extends BinaryTreeNode<T> {\n  get leftHeight(): number {\n    return (this.left as AVLTreeNode<T>)?.height ?? 0;\n  }\n  get rightHeight(): number {\n    return (this.right as AVLTreeNode<T>)?.height ?? 0;\n  }\n  get balance() {\n    return Math.abs(this.leftHeight - this.rightHeight) <= 1;\n  }\n  get height() {\n    return Math.max(this.leftHeight, this.rightHeight) + 1;\n  }\n  /* istanbul ignore next */\n  constructor(\n    public val: T,\n    public parent: AVLTreeNode<T> | null = null,\n    public left: AVLTreeNode<T> | null = null,\n    public right: AVLTreeNode<T> | null = null\n  ) {\n    super(val, parent, left, right);\n  }\n}\nexport class AVLTree<T> extends BlanceBinarySearchTree<T> {\n  protected createNode(\n    val: T,\n    parent: BinaryTreeNode<T> | null = null,\n    left: BinaryTreeNode<T> | null = null,\n    right: BinaryTreeNode<T> | null = null\n  ): BinaryTreeNode<T> {\n    return new AVLTreeNode(\n      val,\n      parent as AVLTreeNode<T> | null,\n      left as AVLTreeNode<T> | null,\n      right as AVLTreeNode<T> | null\n    );\n  }\n  protected afterAdd(node: AVLTreeNode<T>) {\n    let parent = node.parent;\n    while (parent !== null) {\n      if (!parent.balance) {\n        this.reBalance(parent);\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n  protected afterRemove(node: AVLTreeNode<T>) {\n    let parent = node.parent;\n    while (parent !== null) {\n      if (!parent.balance) this.reBalance(parent);\n      parent = parent.parent;\n    }\n  }\n  private reBalance(grandParent: AVLTreeNode<T>) {\n    const parent = this.getUnbalancedChild(grandParent);\n    const child = this.getUnbalancedChild(parent);\n    /**\n     \u5de6\u53f3\u65cb\u8f6c1\n    if (parent.isLeftChild) {\n      // L\n      if (child.isRightChild) this.rotateLeft(parent);\n      this.rotateRight(grandParent);\n    } else {\n      // R\n      if (child.isLeftChild) this.rotateRight(parent);\n      this.rotateLeft(grandParent);\n    }\n     */\n    if (parent.isLeftChild) {\n      if (child.isLeftChild)\n        this.rotate(\n          grandParent,\n          parent,\n          child,\n          child.left,\n          child.right,\n          grandParent,\n          parent.right,\n          grandParent.right\n        );\n      else\n        this.rotate(\n          grandParent,\n          child,\n          parent,\n          parent.left,\n          child.left,\n          grandParent,\n          child.right,\n          grandParent.right\n        );\n    } else {\n      // R\n      if (child.isRightChild)\n        this.rotate(\n          grandParent,\n          parent,\n          grandParent,\n          grandParent.left,\n          parent.left,\n          child,\n          child.left,\n          child.right\n        );\n      else\n        this.rotate(\n          grandParent,\n          child,\n          grandParent,\n          grandParent.left,\n          child.left,\n          parent,\n          child.right,\n          parent.right\n        );\n    }\n  }\n  private getUnbalancedChild(node: AVLTreeNode<T>): AVLTreeNode<T> {\n    return (\n      node.leftHeight > node.rightHeight\n        ? node.left\n        : node.leftHeight < node.rightHeight\n        ? node.right\n        : node[node.childPosition]\n    ) as AVLTreeNode<T>;\n  }\n}\n"})})]})}function s(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},25710:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>d});var r=t(30758);const i={},a=r.createContext(i);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunk_bestlyg_site=self.webpackChunk_bestlyg_site||[]).push([[54592],{72671:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"\u5e38\u89c1\u6280\u5de7/\u9879\u76ee\u6784\u5efa","title":"\u9879\u76ee\u6784\u5efa","description":"\u9879\u76ee\u6784\u5efa\u5e38\u7528\u5e93","source":"@site/docs/\u5e38\u89c1\u6280\u5de7/\u9879\u76ee\u6784\u5efa.mdx","sourceDirName":"\u5e38\u89c1\u6280\u5de7","slug":"/\u5e38\u89c1\u6280\u5de7/\u9879\u76ee\u6784\u5efa","permalink":"/docs/\u5e38\u89c1\u6280\u5de7/\u9879\u76ee\u6784\u5efa","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"journal","previous":{"title":"\u7ed3\u675f\u5360\u7528\u8fdb\u7a0b","permalink":"/docs/\u5e38\u89c1\u6280\u5de7/\u7ed3\u675f\u5360\u7528\u8fdb\u7a0b"}}');var c=i(25105),l=i(8556);const r={},o="\u9879\u76ee\u6784\u5efa",a={},t=[{value:"\u9879\u76ee\u6784\u5efa\u5e38\u7528\u5e93",id:"\u9879\u76ee\u6784\u5efa\u5e38\u7528\u5e93",level:2},{value:"Gzip",id:"gzip",level:2},{value:"commitizen",id:"commitizen",level:3},{value:"cz-customizable",id:"cz-customizable",level:3},{value:"@commitlint/cli",id:"commitlintcli",level:3},{value:"@commitlint/config-conventional",id:"commitlintconfig-conventional",level:3},{value:"commitlint-config-cz",id:"commitlint-config-cz",level:3},{value:"conventional-changelog-cli",id:"conventional-changelog-cli",level:3},{value:"standard-version",id:"standard-version",level:3},{value:"semver",id:"semver",level:3}];function d(n){const e={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u9879\u76ee\u6784\u5efa",children:"\u9879\u76ee\u6784\u5efa"})}),"\n",(0,c.jsx)(e.h2,{id:"\u9879\u76ee\u6784\u5efa\u5e38\u7528\u5e93",children:"\u9879\u76ee\u6784\u5efa\u5e38\u7528\u5e93"}),"\n",(0,c.jsx)(e.h2,{id:"gzip",children:"Gzip"}),"\n",(0,c.jsxs)(e.p,{children:["webpack \u4f9d\u8d56\u5e93",(0,c.jsx)(e.br,{}),"\n",(0,c.jsx)(e.code,{children:"yarn add compression-webpack-plugin -D"}),(0,c.jsx)(e.br,{}),"\n","\u7531\u4e8e\u7248\u672c\u66f4\u65b0\u95ee\u9898\uff0cwebpack4 \u4f7f\u7528\u65f6\u9700\u5b89\u88c5\u4f4e\u7248\u672c",(0,c.jsx)(e.br,{}),"\n",(0,c.jsx)(e.code,{children:"yarn add compression-webpack-plugin@6. -D"})]}),"\n",(0,c.jsx)(e.p,{children:"\u4f7f\u7528\u65b9\u6848"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"// umi & dumi\n{\n  chainWebpack(config, { webpack }) {\n    // \u751f\u4ea7\u6a21\u5f0f\u5f00\u542f\n    config.plugin('compression-webpack-plugin').use(\n      new CompressionWebpackPlugin({\n        // filename: \u6587\u4ef6\u540d\u79f0\uff0c\u8fd9\u91cc\u6211\u4eec\u4e0d\u8bbe\u7f6e\uff0c\u8ba9\u5b83\u4fdd\u6301\u548c\u672a\u538b\u7f29\u7684\u6587\u4ef6\u540c\u4e00\u4e2a\u540d\u79f0\n        algorithm: 'gzip', // \u6307\u5b9a\u751f\u6210gzip\u683c\u5f0f\n        test: new RegExp(`.(${['js', 'css'].join('|')})$`), // \u5339\u914d\u54ea\u4e9b\u683c\u5f0f\u6587\u4ef6\u9700\u8981\u538b\u7f29\n        threshold: 1024 * 10, //\u5bf9\u8d85\u8fc710k\u7684\u6570\u636e\u8fdb\u884c\u538b\u7f29\n        minRatio: 0.6, // \u538b\u7f29\u6bd4\u4f8b\uff0c\u503c\u4e3a0 ~ 1\n      })\n    );\n  }\n}\n"})}),"\n",(0,c.jsx)(e.h3,{id:"commitizen",children:"commitizen"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"\u9879\u76ee\u89c4\u8303\u63d0\u4ea4\u5e93"}),"\n",(0,c.jsxs)(e.li,{children:["\u5b89\u88c5\u540e\u9700\u6267\u884c\u4e00\u6b21",(0,c.jsx)(e.code,{children:"commitizen init cz-conventional-changelog --save-dev --save-exact"}),"\u8fdb\u884c\u521d\u59cb\u5316"]}),"\n",(0,c.jsxs)(e.li,{children:["\u521d\u59cb\u5316\u6210\u529f\u540e\u53ef",(0,c.jsx)(e.code,{children:"git-cz"}),"\u8fdb\u884c\u63d0\u4ea4"]}),"\n",(0,c.jsxs)(e.li,{children:["\u521d\u59cb\u5316\u547d\u4ee4\u4e3b\u8981\u8fdb\u884c\u4e86 3 \u4ef6\u4e8b\u60c5",(0,c.jsx)(e.br,{}),"\n","1.\u5728\u9879\u76ee\u4e2d\u5b89\u88c5 cz-conventional-changelog \u9002\u914d\u5668\u4f9d\u8d56",(0,c.jsx)(e.br,{}),"\n","2.\u5c06\u9002\u914d\u5668\u4f9d\u8d56\u4fdd\u5b58\u5230 package.json \u7684 devDependencies \u5b57\u6bb5\u4fe1\u606f",(0,c.jsx)(e.br,{}),"\n","3.\u5728 package.json \u4e2d\u65b0\u589e config.commitizen \u5b57\u6bb5\u4fe1\u606f\uff0c\u4e3b\u8981\u7528\u4e8e\u914d\u7f6e cz \u5de5\u5177\u7684\u9002\u914d\u5668\u8def\u5f84\uff1a"]}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-json",children:'"devDependencies": {\n    "cz-conventional-changelog": "^2.1.0"\n},\n"config": {\n    "commitizen": {\n      "path": "./node_modules/cz-conventional-changelog"\n    }\n}\n'})}),"\n",(0,c.jsx)(e.h3,{id:"cz-customizable",children:"cz-customizable"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["\u901a\u8fc7\u5728\u6839\u76ee\u5f55\u7f16\u5199",(0,c.jsx)(e.code,{children:".cz-config.js"}),"\u6587\u4ef6\u8fdb\u884c\u81ea\u5b9a\u4e49",(0,c.jsx)(e.code,{children:"git-cz"}),"\u9879\u76ee\u63d0\u4ea4\u683c\u5f0f"]}),"\n",(0,c.jsx)(e.li,{children:"\u4e00\u4efd\u793a\u4f8b"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"'use strict';\n\nmodule.exports = {\n  types: [\n    { value: '\u7279\u6027', name: '\u7279\u6027:    \u4e00\u4e2a\u65b0\u7684\u7279\u6027' },\n    { value: '\u4fee\u590d', name: '\u4fee\u590d:    \u4fee\u590d\u4e00\u4e2aBug' },\n    { value: '\u6587\u6863', name: '\u6587\u6863:    \u53d8\u66f4\u7684\u53ea\u6709\u6587\u6863' },\n    { value: '\u683c\u5f0f', name: '\u683c\u5f0f:    \u7a7a\u683c, \u5206\u53f7\u7b49\u683c\u5f0f\u4fee\u590d' },\n    { value: '\u91cd\u6784', name: '\u91cd\u6784:    \u4ee3\u7801\u91cd\u6784\uff0c\u6ce8\u610f\u548c\u7279\u6027\u3001\u4fee\u590d\u533a\u5206\u5f00' },\n    { value: '\u6027\u80fd', name: '\u6027\u80fd:    \u63d0\u5347\u6027\u80fd' },\n    { value: '\u6d4b\u8bd5', name: '\u6d4b\u8bd5:    \u6dfb\u52a0\u4e00\u4e2a\u6d4b\u8bd5' },\n    { value: '\u5de5\u5177', name: '\u5de5\u5177:    \u5f00\u53d1\u5de5\u5177\u53d8\u52a8(\u6784\u5efa\u3001\u811a\u624b\u67b6\u5de5\u5177\u7b49)' },\n    { value: '\u56de\u6eda', name: '\u56de\u6eda:    \u4ee3\u7801\u56de\u9000' },\n  ],\n  scopes: [{ name: '\u4e2a\u4eba\u535a\u5ba2' }, { name: '\u529b\u6263\u9898\u89e3' }, { name: '\u5e94\u7528\u5408\u96c6' }, { name: '\u914d\u7f6e\u6587\u4ef6' }],\n  // it needs to match the value for field type. Eg.: 'fix'\n  /*\n  scopeOverrides: {\n    fix: [\n      {name: 'merge'},\n      {name: 'style'},\n      {name: 'e2eTest'},\n      {name: 'unitTest'}\n    ]\n  },\n  */\n  // override the messages, defaults are as follows\n  messages: {\n    type: '\u9009\u62e9\u4e00\u79cd\u4f60\u7684\u63d0\u4ea4\u7c7b\u578b:',\n    scope: '\u9009\u62e9\u4e00\u4e2ascope (\u53ef\u9009):',\n    // used if allowCustomScopes is true\n    customScope: 'Denote the SCOPE of this change:',\n    subject: '\u77ed\u8bf4\u660e:\\n',\n    body: '\u957f\u8bf4\u660e\uff0c\u4f7f\u7528\"|\"\u6362\u884c(\u53ef\u9009)\uff1a\\n',\n    breaking: '\u975e\u517c\u5bb9\u6027\u8bf4\u660e (\u53ef\u9009):\\n',\n    footer: '\u5173\u8054\u5173\u95ed\u7684issue\uff0c\u4f8b\u5982\uff1a#31, #34(\u53ef\u9009):\\n',\n    confirmCommit: '\u786e\u5b9a\u63d0\u4ea4\u8bf4\u660e?',\n  },\n\n  allowCustomScopes: true,\n  allowBreakingChanges: ['\u7279\u6027', '\u4fee\u590d'],\n  // limit subject length\n  subjectLimit: 100,\n};\n"})}),"\n",(0,c.jsx)(e.h3,{id:"commitlintcli",children:"@commitlint/cli"}),"\n",(0,c.jsx)(e.p,{children:"commit \u683c\u5f0f\u6821\u9a8c\u5668"}),"\n",(0,c.jsx)(e.h3,{id:"commitlintconfig-conventional",children:"@commitlint/config-conventional"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"commit angular \u683c\u5f0f\u6821\u9a8c\u89c4\u5219"}),"\n",(0,c.jsxs)(e.li,{children:["\u5728\u9879\u76ee\u4e2d\u65b0\u5efa",(0,c.jsx)(e.code,{children:"commitlint.config.js"}),"\u6587\u4ef6\u5e76\u8bbe\u7f6e\u6821\u9a8c\u89c4\u5219"]}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"module.exports = {\n  extends: ['@commitlint/config-conventional'],\n};\n"})}),"\n",(0,c.jsx)(e.h3,{id:"commitlint-config-cz",children:"commitlint-config-cz"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["\u5982\u679c\u662f\u4f7f\u7528 cz-customizable \u9002\u914d\u5668\u505a\u4e86\u7834\u574f Angular \u98ce\u683c\u7684\u63d0\u4ea4\u8bf4\u660e\u914d\u7f6e\uff0c\u90a3\u4e48\u4e0d\u80fd\u4f7f\u7528",(0,c.jsx)(e.code,{children:"@commitlint/config-conventional"}),"\u89c4\u5219\u8fdb\u884c\u63d0\u4ea4\u8bf4\u660e\u6821\u9a8c"]}),"\n",(0,c.jsxs)(e.li,{children:["\u53ef\u4ee5\u4f7f\u7528",(0,c.jsx)(e.code,{children:"commitlint-config-cz"}),"\u5bf9\u5b9a\u5236\u5316\u63d0\u4ea4\u8bf4\u660e\u8fdb\u884c\u6821\u9a8c\u3002\u7136\u540e\u5728\u9879\u76ee\u4e2d\u65b0\u5efa",(0,c.jsx)(e.code,{children:"commitlint.config.js"}),"\u6587\u4ef6\u5e76\u8bbe\u7f6e\u6821\u9a8c\u89c4\u5219\u52a0\u5165 commitlint \u6821\u9a8c\u89c4\u5219\u914d\u7f6e\uff1a"]}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"module.exports = {\n  extends: ['cz'],\n};\n"})}),"\n",(0,c.jsx)(e.h3,{id:"conventional-changelog-cli",children:"conventional-changelog-cli"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["\u751f\u6210",(0,c.jsx)(e.em,{children:"CHANGELOG.md"}),"\u6587\u4ef6"]}),"\n",(0,c.jsxs)(e.li,{children:["\u8ffd\u52a0",(0,c.jsx)(e.code,{children:"conventional-changelog -p angular -i CHANGELOG.md -s"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8986\u76d6",(0,c.jsx)(e.code,{children:"conventional-changelog -p angular -i CHANGELOG.md -s -r 0"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.em,{children:"\u4f7f\u7528 cz-customizable \u81ea\u5b9a\u4e49\u914d\u7f6e\u540e\u7834\u574f angular \u89c4\u5219\u540e\u4f1a\u5931\u6548"}),",\u9700\u5728 cli \u4e2d\u5220\u9664 angular \u914d\u7f6e"]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"standard-version",children:"standard-version"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["\u66f4\u65b0\u7248\u672c\u53f7 ",(0,c.jsx)(e.a,{href:"https://github.com/conventional-changelog/standard-version",children:"github"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5e38\u7528\u547d\u4ee4","\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.code,{children:"standard-version -r major"})}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.code,{children:"standard-version -r minor"})}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.code,{children:"standard-version -r patch"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"semver",children:"semver"}),"\n",(0,c.jsx)(e.p,{children:"\u66f4\u65b0\u7248\u672c\u53f7"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"import { minimist, pkg, semver, enquirer, chalk, fs, resolve } from '../utils';\n\nconst args = minimist(process.argv.slice(2));\nconst currentVersion = pkg.version;\n\nconst preId =\n  args.preid || (semver.prerelease(currentVersion) && semver.prerelease(currentVersion)?.[0]);\nconst versionIncrements: semver.ReleaseType[] = [\n  'major',\n  'minor',\n  'patch',\n  ...((preId ? ['prepatch', 'preminor', 'premajor', 'prerelease'] : []) as semver.ReleaseType[]),\n];\nconst inc = (i: semver.ReleaseType) => semver.inc(currentVersion, i, preId);\nasync function main() {\n  const { release } = (await enquirer.prompt({\n    type: 'select',\n    name: 'release',\n    message: '\u9009\u62e9\u4e0b\u4e00\u7248\u672c',\n    choices: versionIncrements.map(i => `${i} (${inc(i)})`),\n  })) as { release: string };\n  const targetVersion = release.match(/\\((.*)\\)/)![1];\n  console.log(chalk.blue(`\u4e0b\u4e00\u7248\u672c : ${targetVersion}`));\n  pkg.version = targetVersion;\n  fs.writeFileSync(resolve('package.json'), JSON.stringify(pkg, null, 2) + '\\n');\n}\nmain();\n"})})]})}function m(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}},8556:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>o});var s=i(58101);const c={},l=s.createContext(c);function r(n){const e=s.useContext(l);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:r(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);